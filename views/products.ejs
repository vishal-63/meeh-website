<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />

    <title>Meehh.com - Products</title>

    <!-- Fav Icon -->
    <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon" />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />

    <!-- Stylesheets -->
    <link href="/assets/css/font-awesome-all.css" rel="stylesheet" />
    <link href="/assets/css/flaticon.css" rel="stylesheet" />
    <link href="/assets/css/owl.css" rel="stylesheet" />
    <link href="/assets/css/bootstrap.css" rel="stylesheet" />
    <link href="/assets/css/jquery.fancybox.min.css" rel="stylesheet" />
    <link href="/assets/css/animate.css" rel="stylesheet" />
    <link href="/assets/css/jquery-ui.css" rel="stylesheet" />
    <link href="/assets/css/nice-select.css" rel="stylesheet" />
    <link href="/assets/css/color.css" rel="stylesheet" />
    <link href="/assets/css/style.css" rel="stylesheet" />
    <link href="/assets/css/responsive.css" rel="stylesheet" />
  </head>

  <!-- page wrapper -->
  <body>
    <div class="boxed_wrapper">
      <!-- main header -->
      <header class="main-header">
        <div class="header-lower">
          <div class="auto-container">
            <div class="outer-box">
              <figure class="logo-box">
                <a href="/"
                  ><img src="assets/images/header-logo.png" alt=""
                /></a>
              </figure>
              <div class="menu-area">
                <!--Mobile Navigation Toggler-->
                <div class="mobile-nav-toggler">
                  <i class="icon-bar"></i>
                  <i class="icon-bar"></i>
                  <i class="icon-bar"></i>
                </div>
                <nav class="main-menu navbar-expand-md navbar-light">
                  <div
                    class="collapse navbar-collapse show clearfix"
                    id="navbarSupportedContent"
                  >
                    <ul class="navigation clearfix">
                      <li class="current">
                        <a href="/">Home</a>
                      </li>
                      <li class="dropdown">
                        <a href="/products">Shop<span>Hot</span></a>
                        <ul>
                          <li>
                            <a href="/products?category=bookmarks">Bookmarks</a>
                          </li>
                          <li>
                            <a href="/products?category=pop-grippers"
                              >Pop Grippers</a
                            >
                          </li>
                          <li>
                            <a href="/products?category=tote-bags">Tote Bags</a>
                          </li>
                          <li>
                            <a href="/products?category=badges">Badges</a>
                          </li>
                          <li>
                            <a href="/products?category=diaries">Diaries</a>
                          </li>
                          <li>
                            <a href="/products?category=mousepads">Mousepads</a>
                          </li>
                        </ul>
                      </li>
                      <li>
                        <a href="/about">About</a>
                      </li>
                      <li><a href="/blogs">Blog</a></li>
                      <li><a href="/contact">Contact</a></li>
                    </ul>
                  </div>
                </nav>
              </div>
              <ul class="menu-right-content clearfix">
                <!-- <li>
                                  <div class="search-btn">
                                      <button type="button" class="search-toggler"><i class="flaticon-search"></i></button>
                                  </div>
                              </li> -->
                <li>
                  <a href="/wishlist"><i class="flaticon-like"></i></a>
                </li>
                <li class="dropdown">
                  <a href="#"><i class="flaticon-user"></i></a>
                  <ul>
                    <% if(userLoggedIn) { %>
                    <li><a href="/profile">Profile</a></li>
                    <li><a href="/orders">Your orders</a></li>
                    <li><a href="/logout">Logout</a></li>
                    <% } else { %> 
                    <li><a href="/login">Log In</a></li>
                    <li><a href="/register">Sign Up</a></li>
                    <% } %>
                  </ul>
                </li>
                <li class="shop-cart">
                  <a href="/cart"
                    ><i class="flaticon-shopping-cart-1"></i><span>3</span></a
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>

        <!--sticky Header-->
        <div class="sticky-header">
          <div class="auto-container">
            <div class="outer-box clearfix">
              <div class="logo-box pull-left">
                <figure class="logo">
                  <a href="/"
                    ><img src="assets/images/small-logo.png" alt=""
                  /></a>
                </figure>
              </div>
              <div class="menu-area pull-right">
                <nav class="main-menu clearfix">
                  <!--Keep This Empty / Menu will come through Javascript-->
                </nav>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- main-header end -->

      <!-- Mobile Menu  -->
      <div class="mobile-menu">
        <div class="menu-backdrop"></div>
        <div class="close-btn"><i class="fas fa-times"></i></div>
        <nav class="menu-box">
          <div class="nav-logo">
            <a href="/"
              ><img src="assets/images/logo-2.png" alt="" title=""
            /></a>
          </div>
          <div class="menu-outer">
            <!--Here Menu Will Come Automatically Via Javascript / Same Menu as in Header-->
          </div>
          <div class="contact-info">
            <h4>Contact Info</h4>
            <ul>
              <li>Chicago 12, Melborne City, USA</li>
              <li><a href="tel:+8801682648101">+88 01682648101</a></li>
              <li><a href="mailto:info@meehh.com">info@meehh.com</a></li>
            </ul>
          </div>
          <div class="social-links">
            <ul class="clearfix">
              <li>
                <a href="/"><span class="fab fa-twitter"></span></a>
              </li>
              <li>
                <a href="/"><span class="fab fa-facebook-square"></span></a>
              </li>
              <li>
                <a href="/"><span class="fab fa-pinterest-p"></span></a>
              </li>
              <li>
                <a href="/"><span class="fab fa-instagram"></span></a>
              </li>
              <li>
                <a href="/"><span class="fab fa-youtube"></span></a>
              </li>
            </ul>
          </div>
        </nav>
      </div>
      <!-- End Mobile Menu -->

      <!-- page-title -->
      <section class="page-title centred">
        <div
          class="pattern-layer"
          style="background-image: url(assets/images/background/page-title.jpg)"
        ></div>
        <div class="auto-container">
          <div class="content-box">
            <h1>Products</h1>
            <ul class="bread-crumb clearfix">
              <li><i class="flaticon-home-1"></i><a href="/">Home</a></li>
              <li>Products</li>
            </ul>
          </div>
        </div>
      </section>
      <!-- page-title end -->

      <!-- added to cart alert -->
      <div class="products-alert d-none">
        <div
          class="alert alert-success alert-dismissible fade show"
          role="alert"
        >
          <span class="text"></span>
          <button
            type="button"
            class="close"
            data-dismiss="alert"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
      </div>

      <!-- shop-page-section -->
      <section class="shop-page-section shop-page-1">
        <div class="auto-container">
          <div class="item-shorting clearfix">
            <div class="left-column pull-left clearfix">
              <div class="text mx-0"><p>Showing 1â€“12 of 50 Results</p></div>
            </div>
          </div>

          <div class="our-shop">
            <div class="row clearfix">
              <% for(let i=0;i<productList.length;i++){ %>
              <div class="col-lg-3 col-md-6 col-sm-12 shop-block">
                <div class="shop-block-one">
                  <div class="inner-box">
                    <figure class="image-box">
                      <img
                        src="<%= productList[i].inventory[0].thumbnail_images[0]!=null?productList[i].inventory[0].thumbnail_images[0]:'assets/images/resource/shop/shop-1.jpg' %>"
                        alt=""
                      />
                      <ul class="info-list clearfix">
                        <li onClick="addWishlist('<%= productList[i]._id %>')">
                          <a><i class="flaticon-heart"></i></a>
                        </li>
                        <li onClick="addToCart('<%= productList[i]._id %>')">
                          <a>Add to cart</a>
                        </li>
                      </ul>
                    </figure>
                    <div class="lower-content">
                      <a href="products/<%= productList[i]._id %>"
                        ><%= productList[i].product_name %></a
                      >
                      <span class="price">$<%= productList[i].price %></span>
                    </div>
                  </div>
                </div>
              </div>
              <% } %>
            </div>
          </div>
        </div>
      </section>
      <!-- shop-page-section end -->

      <!-- main-footer -->
      <%- include('footer')%>
      <!-- main-footer end -->

      <!--Scroll to top-->
      <button class="scroll-top scroll-to-target" data-target="html">
        <i class="fas fa-long-arrow-alt-up"></i>
      </button>
    </div>

    <!-- jequery plugins -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/owl.js"></script>
    <script src="assets/js/wow.js"></script>
    <script src="assets/js/validation.js"></script>
    <script src="assets/js/jquery.fancybox.js"></script>
    <script src="assets/js/TweenMax.min.js"></script>
    <script src="assets/js/appear.js"></script>
    <script src="assets/js/scrollbar.js"></script>
    <script src="assets/js/jquery.nice-select.min.js"></script>
    <script src="assets/js/isotope.js"></script>
    <script src="assets/js/jquery-ui.js"></script>

    <!-- main-js -->
    <script src="assets/js/script.js"></script>
    <script>
      const alert = document.querySelector(".alert > span.text");
      async function addWishlist(id) {
        console.log(id);
        const data = { id: id };
        const url = "/wishlist/addWishlist";
        const options = {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            // 'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: JSON.stringify(data),
        };
        const res = await fetch(url, options);
        if (res.ok) {
          document.querySelector(".products-alert").classList.toggle("d-none");
          alert.innerText = "Item added to the wishlist!";
        } else console.log(res);
      }

      async function addToCart(id) {
        console.log(id);
        const data = {
          id,
          quantity: 1,
          selected_size: "large",
          selected_color: "f6f6f6",
        };
        const url = "/cart/addToCart";
        const options = {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            // 'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: JSON.stringify(data),
        };
        const res = await fetch(url, options);
        if (res.ok) {
          document.querySelector(".products-alert").classList.toggle("d-none");
          alert.innerText = "Item added to cart!";
        } else console.log(res);
      }
    </script>
  </body>
  <!-- End of .page_wrapper -->
</html>
